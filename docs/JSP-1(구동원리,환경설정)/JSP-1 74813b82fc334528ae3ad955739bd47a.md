# JSP-1

# JSP 구동원리

![Untitled](JSP-1%2074813b82fc334528ae3ad955739bd47a/Untitled.png)

## JSP 엔진

jsp엔진은 jsp파일을 서블릿 클래스로 생성시켜준다.

따라서 jsp의 형식을 java형식으로 변환시켜주는 일종의 컴파일러 역할을 한다.

url요청에서부터 알아보자.

1. /hello.jsp요청이 들어오면 servlet container는 해당 서블릿 클래스가 있는지 확인한다.
    - 서블릿 클래스가 없거나 파일이 변경되었다면
        1. hello.jsp파일을 JSP 엔진을 통해서 hello.java로 변환시켜준다.
        2. hello.java를 자바 컴파일러가 hello.class파일로 변환시킨다.
        3. 서블릿컨테이너가 hello객체를 생성시키고 init()을 호출한다.
        4. service()를 호출한다.
    - 서블릿 클래스가 이미 존재한다면 바로 해당 서블릿인스턴스의 service()를 호출한다.

**!< JSP 파일은 바로 인터프리팅 되어 인스턴스화 되는 것이 아니다.>**

**!<JSP는 자바 서블릿 클래스를 만드를 재료로 사용된다. 따라서 템플릿 기술이라고 한다.>**

## JSP 태그

### 1. directive element

<%@       %>

### 2. declaration element

<%!    필드,메서드       %>

### 3. scriptlet

<%       자바 코드       %>

### 4. expression element

<%=     표현식       %>

### 5. JSP action tag

<jsp: 무언가           %>

### 6. template data

## ?

## JSP파일 변환 규칙

JSP엔진이 jsp파일을 java파일로 변환시킬 때의 규칙이 있다.

[Servlet인터페이스, JspPage, HttpJspPage를 구현해야 한다.](https://www.notion.so/2-28-64-fcd9a08d27ce404688c094c17f36cb5e?pvs=21)

# 태그예제

## 템플릿 데이터

JSP엔진이 java파일로 변환할 때 out.write() & out.print() 안에 일반 텍스트로 넣는 데이터를 템플릿 데이터라고 한다.

**아래 예제 코드는 처음부터끝까지 jsp에서는 템플릿 데이터라고 한다.**

```html
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ex02</title>
</head>
<body>
<h1>템플릿 데이터(template data)</h1>
<pre>
- JSP 파일에 그냥 작성하는 텍스트는 자바 출력 코드를 생성한다.
- 예) 
  out.write("템플릿 데이터")
  out.print("템플릿 데이터")
</pre>
</body>
</html>
```